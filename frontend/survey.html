<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Survey ‚Äì Nestra</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6c5dd3;
      --secondary: #463aa2;
      --accent: #f3f0ff;
      --dark: #2d2d39;
      --white: #fff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(120deg, #e4e1ff, #f7f5ff);
      color: var(--dark);
      line-height: 1.6;
    }

    .topbar {
      background-color: var(--primary);
      color: var(--white);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 999;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--white);
    }

    .nav-toggle {
      display: none;
      font-size: 1.5rem;
      color: var(--white);
      cursor: pointer;
    }

    .dropdown-menu {
      list-style: none;
      display: flex;
      gap: 1.5rem;
    }

    .dropdown-menu li a {
      color: var(--white);
      text-decoration: none;
      font-weight: 600;
    }

    .dropdown-menu li a:hover {
      color: #d1ccf2;
    }

    .form-container {
      max-width: 600px;
      margin: 80px auto;
      background-color: var(--white);
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.07);
    }

    .form-container h2 {
      text-align: center;
      margin-bottom: 24px;
      font-size: 1.8rem;
      color: var(--secondary);
    }

    label {
      display: block;
      margin-top: 16px;
      margin-bottom: 6px;
      font-weight: 600;
    }

    select, textarea {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    .btn-primary {
      width: 100%;
      padding: 14px;
      background-color: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 24px;
      transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
      background-color: var(--secondary);
    }

    .voice-btn {
      background: #eae6ff;
      color: #5a4f8d;
      padding: 6px 12px;
      font-size: 0.9rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      float: right;
      margin-top: -36px;
      margin-bottom: 12px;
    }

    .voice-btn:hover {
      background-color: #dcd3ff;
    }

    @media (max-width: 768px) {
      .nav-toggle {
        display: block;
      }

      .dropdown-menu {
        position: absolute;
        top: 60px;
        right: 20px;
        background: white;
        flex-direction: column;
        display: none;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      }

      .dropdown-menu.show {
        display: flex;
      }

      .dropdown-menu li a {
        color: var(--dark);
      }

      .form-container {
        padding: 24px;
        margin: 40px 16px;
      }
    }
  </style>
</head>
<body>
  <nav class="topbar">
    <h2 class="logo">Nestra</h2>
    <div class="nav-toggle" onclick="toggleMenu()">‚ò∞</div>
    <ul class="dropdown-menu" id="dropdownMenu">
      <li><a href="index.html">Home</a></li>
      <li><a href="login.html">Login</a></li>
      <li><a href="register.html">Register</a></li>
      <li><a href="match-result.html">Match Result</a></li>
      <li><a href="admin.html">Admin</a></li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="help.html">Help</a></li>
      <li><a href="stats.html">Stats</a></li>
      <li>
        <a href="profile.html" style="display: flex; align-items: center; gap: 0.4em;">
          <span style="display: flex; align-items: center;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display:inline-block;vertical-align:middle;">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
              <circle cx="12" cy="10" r="4" stroke="currentColor" stroke-width="1.5" fill="none"/>
              <path d="M6.5 18c1.5-2 9.5-2 11 0" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/>
            </svg>
          </span>
          Profile
        </a>
      </li>
    </ul>
  </nav>

  <div class="form-container">
    <h2>üé§ Compatibility Survey</h2>
    <form action="../backend/survey_process.php" method="POST">
      <label for="sleep">Preferred Sleep Schedule</label>
      <select id="sleep" name="sleep" required>
        <option value="">-- Select --</option>
        <option>Early Riser</option>
        <option>Night Owl</option>
        <option>Flexible</option>
      </select>

      <label for="cleanliness">Cleanliness Level</label>
      <select id="cleanliness" name="cleanliness" required>
        <option value="">-- Select --</option>
        <option>Very Clean</option>
        <option>Moderate</option>
        <option>Messy</option>
      </select>

      <label for="work">Work/Study Style</label>
      <select id="work" name="work" required>
        <option value="">-- Select --</option>
        <option>Remote</option>
        <option>Office</option>
        <option>Student</option>
      </select>

      <label for="social">Social Preference</label>
      <select id="social" name="social" required>
        <option value="">-- Select --</option>
        <option>Introvert</option>
        <option>Extrovert</option>
        <option>Mixed</option>
      </select>

      <label for="room">Room Preference</label>
      <select id="room" name="room" required>
        <option value="">-- Select --</option>
        <option>Twin Sharing</option>
        <option>Single</option>
        <option>No Preference</option>
      </select>

      <label for="diet">Diet Preference</label>
      <select id="diet" name="diet" required>
        <option value="">-- Select --</option>
        <option>Vegetarian</option>
        <option>Non-Vegetarian</option>
        <option>Vegan</option>
      </select>

      <label for="pets">Pet Tolerance</label>
      <select id="pets" name="pets" required>
        <option value="">-- Select --</option>
        <option>Okay with pets</option>
        <option>No pets</option>
        <option>Allergic</option>
      </select>

      <label for="noise">Noise Tolerance Level</label>
      <select id="noise" name="noise" required>
        <option value="">-- Select --</option>
        <option>High</option>
        <option>Moderate</option>
        <option>Low</option>
      </select>

      <label for="needs">Your Needs</label>
      <textarea id="needs" name="needs" placeholder="Mention any specific needs, allergies, or preferences..." required></textarea>
      <button type="button" class="voice-btn" onclick="startVoiceInput()">üéôÔ∏è Speak</button>

      <button type="submit" class="btn-primary">Submit Survey</button>
    </form>
  </div>

  <script>
    function toggleMenu() {
      document.getElementById("dropdownMenu").classList.toggle("show");
    }

    window.addEventListener("click", function(e) {
      const toggle = document.querySelector(".nav-toggle");
      const menu = document.getElementById("dropdownMenu");
      if (!toggle.contains(e.target) && !menu.contains(e.target)) {
        menu.classList.remove("show");
      }
    });

    function startVoiceInput() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("Your browser doesn't support speech recognition. Please use Chrome.");
        return;
      }

      const recognition = new webkitSpeechRecognition();
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.start();

      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById('needs').value = transcript;
      };

      recognition.onerror = function(event) {
        alert("Voice recognition error: " + event.error);
      };
    }
  </script>
</body>
</html>
